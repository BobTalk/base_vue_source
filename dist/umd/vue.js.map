{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observe/arrayMethods.js","../../src/observe/dep.js","../../src/observe/index.js","../../src/state.js","../../src/compiler/parser-html.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/utils/next-tick.js","../../src/observe/schedular.js","../../src/observe/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initGlobalAPI/mixin.js","../../src/initGlobalAPI/const.js","../../src/initGlobalAPI/assets.js","../../src/initGlobalAPI/extend.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["export function isObject(data) {\n    return (typeof data == 'object' && data != null) \n}\nexport function def(data, key, value) { \n    Object.defineProperty(data, key, {\n        enumerable: false, // 不参与循环\n        writable: false,\n        configurable: false,\n        value\n    })\n}\nexport function proxy(vm,source, key){\n    Object.defineProperty(vm, key, {\n        get() { \n            return vm[source][key]\n        },\n        set(newVal) {\n            return vm[source][key] = newVal \n        }\n    })\n}\nconst LIFECYCLE_HOOKS = [\n    'beforeCreate',\n    'created', \n    'beforeMount',\n    'mounted',\n    'beforeUpdate',\n    'updated',\n    'beforeDestroy',\n    'destroyed',\n    'activated',\n    'deactivated',\n    'errorCaptured',\n    'serverPrefetch'\n]\nlet stratas = {}\n// 合并钩子函数 参数来源与 stratas[key](parent[key], child[key]) \nfunction mergeHook(parentVal, childVal) {\n    console.log('mergeHook')\n    if (childVal) { \n        if (parentVal) { \n            return parentVal.concat(childVal)\n        } else {\n            return [childVal]\n         }\n    } else { \n        return parentVal\n    }\n }\nLIFECYCLE_HOOKS.forEach(hook => { \n    console.log('LIFECYCLE_HOOKS')\n    stratas[hook] = mergeHook\n})\nfunction mergeAssets(parentVal, childVal) {\n    const res = Object.create(parentVal)\n    if (childVal) { \n        for (let key in childVal) { \n            res[key] = childVal[key]\n        }\n    }\n    return res\n }\nstratas.components = mergeAssets\n// 合并配置选项\nexport function mergeOptions(parent, child) { \n    console.log(parent)\n    const options = {}\n    for (let key in parent) { \n        mergeField(key)\n    }\n    for (let key in child) { \n        // 如果已合并 就不在合并\n        if (!parent.hasOwnProperty(key)) { \n            mergeField(key)\n        }\n    }\n    function mergeField(key) {\n        console.log(\"mergeField\")\n        // 主要用于生命周期\n        if (stratas[key]) { \n            return options[key] = stratas[key](parent[key], child[key])\n        }\n        if (typeof parent[key] === 'object' && typeof child[key] === 'object') {\n            options[key] = {\n                ...parent[key],\n                ...child[key]\n            }\n        } else if (child[key] == null) {\n            options[key] = parent[key]\n        } else { \n            options[key] = child[key]\n        }\n    }\n    return options\n}\nexport const isReservedTag = (tagName) =>{ \n    let str = `p, div, span, input, button, h1, h2, h3, h4, h5, textarea, hr, select`\n    let obj = {}\n    str.split(',').forEach(tag => { \n        obj[tag.trim()] = true\n    })\n    return obj[tagName]\n}","let oldArrayMethods = Array.prototype\n// value.__proto__ = arrayMethods\n// arrayMethods.__proto__ = oldArrayMethods\nexport let arrayMethods = Object.create(oldArrayMethods)\nconst methods = [\n    'push',\n    'shift',\n    'unshift',\n    'pop',\n    'sort',\n    'splice',\n    'reverse',\n]\nmethods.forEach(method => { \n    arrayMethods[method] = function (...args) { \n       const result =  oldArrayMethods[method].apply(this, args)\n        let inserted;\n        let ob = this.__ob__\n        switch (method) {\n            case \"push\":\n            case \"unshift\":\n                inserted = args\n            case 'splice':\n                inserted = args.slice(2)\n        }\n        if (inserted) ob.observeArray(inserted)\n        ob.dep.notify()\n        return result\n    }\n})","\nlet id = 0\nexport default class Dep {\n    constructor() { \n        this.id = id\n        this.subs = []\n    }\n    addSub(watcher) { \n        this.subs.push(watcher)\n    }\n    depend() { \n        Dep.target.addDep(this)\n        // this.subs.push(Dep.target) // 观察者模式\n    }\n    notify() { \n        this.subs.forEach(watcher => watcher.update())\n    }\n }\nlet stack=[]\nexport function pushTarget(watcher) {\n    Dep.target = watcher\n    stack.push(watcher)\n }\nexport function popTarget() {\n    stack.pop()\n    Dep.target = stack[stack.length -1]\n}\n ","import { isObject, def } from '../utils/index.js';\nimport { arrayMethods } from './arrayMethods.js';\nimport Dep from './dep.js';\nclass Observe { \n    constructor(value) { \n        this.dep = new Dep();\n        def(value, '__ob__', this)\n        if (Array.isArray(value)) { \n            value.__proto__ = arrayMethods\n            this.observeArray(value)\n        } else { \n            this.walk(value) // 对数组进行监控\n        }\n        \n    }\n    observeArray(value) {\n        for (let i = 0; i < value.length; i++) { \n            observe(value[i])\n        }\n     }\n    walk(data) { \n        let keys = Object.keys(data)\n        keys.forEach(key => { \n            defineReactive(data, key, data[key])\n        })\n    }\n}\n// 核心 数据拦截\nfunction defineReactive(data, key, value) { \n    let dep = new Dep()\n    // observe(value)\n    let childOb = observe(value) // 返回结果为observe实例\n    Object.defineProperty(data, key, {\n        configurable: true,\n        enumerable: true,\n        get() { \n            console.log('get Val')\n            if (Dep.target) {  // 当前watcher\n                dep.depend() \n                if (childOb) { \n                    childOb.dep.depend() // 收集数组依赖\n                    if (Array.isArray(value)) {  //主要用于数组中的数据又是数组\n                        dependArray(value)\n                    }\n                }\n            }\n            return value\n        },\n        set(newVal) { \n            console.log('set Val')\n            if (newVal == value) return\n            observe(newVal)\n            value = newVal\n            dep.notify() // 执行warcher\n        }\n    })\n}\nfunction dependArray(value) {\n    for (let i = 0; i < value.length; i++) { \n        let current = value[i]\n        current.__ob__ && current.__ob__.dep.depend()\n        if (Array.isArray(current)) { \n            dependArray(current)\n        }\n    }\n }\nexport function observe(data) { \n    let isObj = isObject(data)\n    if (!isObj) return // 是否是对象\n    return new Observe(data) // 观察数据\n}","import { observe } from './observe/index.js';\nimport { proxy } from './utils/index.js';\nexport function initState(vm) {\n    console.log(vm)\n    // 数据来源 data props ...\n    let opts = vm.$options\n    if (opts.props) {\n        initProps(vm)\n    }\n    if (opts.methods) {\n        initMethods(vm)\n    }\n    if (opts.data) {\n        initData(vm)\n    }\n    if (opts.computed) {\n        initComputed(vm)\n    }\n    if (opts.watch) {\n        initWatch(vm)\n    }\n}\n\nfunction initProps(vm) { }\nfunction initMethods(vm) { }\nfunction initData(vm) {\n    let data = vm.$options.data\n\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data // 需要把数据挂到实例上 否者会导致无法修改\n    for (let key in data) {\n        proxy(vm, '_data', key)\n    }\n    // 数据劫持函数\n    observe(data)\n}\nfunction initComputed(vm) { }\nfunction initWatch(vm) { }","/**\n *  ?: 匹配不捕获\n *  @summary 模版编译\n */\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst ncname = \"[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*\"; // abc-dfc\nconst qnameCapture = \"((?:\" + ncname + \"\\\\:)?\" + ncname + \")\";\nconst startTagOpen = new RegExp((\"^<\" + qnameCapture));\nconst startTagClose = /^\\s*(\\/?)>/;\nconst endTag = new RegExp((\"^<\\\\/\" + qnameCapture + \"[^>]*>\"));\nexport function parseHTML(html) {\n    let root = null;\n    let currentParent; // 标识但前父级\n    let stack = []\n    let ELEMENT_TYPE = 1;\n    let TEXT_TYPE = 3\n    function createASTElement(tagName, attrs) {\n        return {\n            tag: tagName,\n            type: ELEMENT_TYPE,\n            children: [],\n            attrs,\n            parent: null\n        }\n    }\n\n    function start(tagName, attrs) {\n        let element = createASTElement(tagName, attrs)\n        if (!root) { \n            root = element\n        }\n        currentParent = element\n        stack.push(element)\n    }\n    function chars(text) { \n        console.log('文本', text)\n        text = text.replace(/\\s/g, '')\n        if (text) { \n            currentParent.children.push({\n                text,\n                type: TEXT_TYPE\n            })\n        }\n    }\n    function end(tagName) {\n        console.log('结束标签', tagName)\n        let element = stack.pop()\n        currentParent =  stack[stack.length -1]\n        if (currentParent) { \n            element.parent = currentParent\n            currentParent.children.push(element)\n        }\n    }\n    while (html) { \n        let textEnd = html.indexOf('<')\n        if (textEnd == 0) { \n            let startTagMatch = parseStartTag()\n            if (startTagMatch) { \n                start(startTagMatch.tagName, startTagMatch.attrs)\n                continue;\n            }\n            let endTagMatch = html.match(endTag)\n            if (endTagMatch) { \n                advance(endTagMatch[0].length)\n                end(endTagMatch[1])\n                continue;\n            }\n        }\n        let text;\n        if (textEnd >= 0) { \n            text = html.substring(0, textEnd)\n        }\n        if (text) { \n            advance(text.length)\n            chars(text)\n        }\n    }\n    function advance(n) {\n        html = html.substring(n)\n     }\n    function parseStartTag() { \n        let start = html.match(startTagOpen)\n        \n        if (start) { \n            const match = {\n                tagName: start[1],\n                attrs:[]\n            }\n            advance(start[0].length)\n            let end, attr;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                advance(attr[0].length)\n                match.attrs.push({\n                    name: attr[1],\n                    value: attr[3] || attr[4] || attr[5]\n                })\n            }\n            console.log(match)\n            console.log(html)\n            if (end) { \n                advance(end[0].length);\n                return match\n            }\n        }\n    }\n    return root\n }","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\nexport function generate(el) { \n    const children = genChildren(el)\n    let code = `_c('${el.tag}', ${el.attrs.length ? genProps(el.attrs) : \"undefined\"}${children ? `,${children}` : ''})`\n    return code\n}\nfunction genProps(attrs) { \n    let str = ''\n    for (let i = 0; i < attrs.length; i++) { \n        let attr = attrs[i]\n        if (attr.name == 'style') { \n            let obj = {}\n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(\":\")\n                obj[key] = value\n            });\n            attr.value = obj\n            \n        }\n        console.log(attr)\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    console.log(str)\n    return `{${str.slice(0,-1)}}`\n}\nfunction genChildren(el) { \n    let children = el.children\n    if (children && children.length > 0) {\n        return `${children.map(c => gen(c)).join(',')}`\n     } else { \n        return false\n    }\n}\nfunction gen(node) { \n    if (node.type == 1) {\n        // 元素\n        return generate(node)\n    } else { \n        let text = node.text\n        let tokens = []\n        // 重置正则指针\n       let lastIndex =  defaultTagRE.lastIndex = 0\n        let match, index;\n        while (match = defaultTagRE.exec(text)) { \n            index = match.index\n            if (index > lastIndex) { \n                tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`)\n            lastIndex = index + match[0].length\n        }\n        if (lastIndex < text.length) { \n            tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n        return `_v(${tokens.join('+')})`\n    }\n}","import { parseHTML } from './parser-html.js';\nimport { generate} from './generate.js';\n\nexport function compileToFunction(template) { \n    // 1. 解析html字符串 将html字符串 ==》ast语法树\n    let root = parseHTML(template)\n    //  2. 需要将ast语法树生成最终的render函数（字符串拼接）\n    let code = generate(root)\n    // 将ast树再次转化成js语法 _c('div', {id:'', style:{}},_c('p',undefined,_v('hello')))\n    // 使用new Function 结合with实现所有的模版\n    let renderFn = new Function(`with(this){return ${code}}`)\n    // 返回虚拟dom (对象)\n    return renderFn\n}\n\n\n","let callbacks = []\nlet waiting = true\nexport function nextTick(cb) { \n    callbacks.push(cb)\n    if (waiting) { \n        setTimeout(() => { \n            callbacks.forEach(fn => fn())\n            waiting = true\n            callbacks = []\n        }, 0)\n        waiting = false\n    }\n   \n}","let queue = []\nlet has = {}\nimport { nextTick } from '../utils/next-tick.js';\nfunction flushSchedularQueue() { \n    queue.forEach(watcher => watcher.run())\n    queue = []\n    has = {}\n}\nexport function queueWatcher(watcher) { \n    const id = watcher.id\n    if (has[id] == null) { \n        queue.push(watcher);\n        has[id] = true\n        nextTick(flushSchedularQueue)\n    }\n\n}","import { pushTarget, popTarget } from './dep.js';\nimport { queueWatcher} from './schedular.js';\nlet id = 0\nexport default class Watcher{ \n    constructor(vm, exprOrFn, cb, options) { \n        this.vm = vm\n        this.getter =  exprOrFn\n        this.cb = cb\n        this.id = id++\n        this.depsId = new Set()\n        this.deps = []\n        this.options = options\n        this.get() // 渲染函数执行\n    }\n    get() { \n        pushTarget(this) // 收集watcher\n        this.getter()\n        popTarget() // 删除watcher\n    }\n    update() {\n        queueWatcher(this) // 主要用于多次出发收集完毕后一次执行\n        // this.getter()\n    }\n    run() { \n        this.get()\n    }\n    addDep(dep) { \n        // 不能存放重复的dep/watcher\n        let id = dep.id\n        if (this.depsId.has(id)) { \n            this.depsId.add(id)\n            this.deps.push(dep)\n            dep.addSub(this) // this => watcher 函数在dep.js中\n        }\n    }\n}","export function patch(oldVnode, vnode) {\n    console.log(oldVnode, vnode)\n    if (!oldVnode) { \n        // 组件模块 创建虚拟节点\n        return createElm(vnode)\n    }\n   \n    // 判断是更新还是渲染\n    const isRealElement = oldVnode.nodeType\n    if (isRealElement) {\n        const oldEle = oldVnode\n        const parentEle = oldEle.parentNode\n        let el = createElm(vnode)\n        parentEle.insertBefore(el, oldEle.nextSibling)\n        parentEle.removeChild(oldEle)\n        return el; //供mount函数使用\n    } else { \n        // diff 标签不一致 直接替换\n        if (oldVnode.tag != vnode.tag) { \n            // createElm() 方法把虚拟节点跟真实节点关联起来\n            oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\n        }\n        if (!oldVnode.tag) { \n            // 文本的情况\n            if (oldVnode.text != vnode.text) { \n                oldVnode.el.textContent = vnode.text\n            }\n        }\n        // 标签一致而且不是文本 属性不一致\n        let el = vnode.el = oldVnode.el\n        updateProps(vnode, oldVnode.data)\n        // 子元素比对\n        let oldChild = oldVnode.children || []\n        let newChild = vnode.children || []\n        if (oldChild.length > 0 && newChild.length > 0) { // 新旧都存在子集\n            updateChildren(el,oldChild, newChild)\n        } else if (newChild.length) {  // 只有新节点\n            for (let i = 0; i < newChild.length; i++) {\n                let child = newChild[i]\n                el.appendChild(createElm(child))\n            }\n        } else if(oldChild.length){ // 只有旧节点 \n            el.innerHTML=''\n        }\n    }\n}\nfunction isSomeVnode(oldVnode, newVnode) {\n    return (oldVnode.tag == newVnode.tag) && (oldVnode.key == newVnode.key)\n }\n// 子节点比对\nfunction updateChildren(el, oldChild, newChild) { \n    // 采用双指针方式\n    let oldStartIndex = 0\n    let oldStartVnode = oldChild[0]\n    let oldENdIndex = oldChild.length - 1\n    let oldEndVnode = oldChild[oldENdIndex]\n    let newStartIndex = 0\n    let newStartVnode = newChild[0]\n    let newENdIndex = newChild.length - 1\n    let newEndVnode = newChild[newENdIndex]\n    // 在比较过程中 只要有一方结束 则比对结束 \n    while (oldStartIndex <= oldENdIndex && newStartIndex <= newENdIndex) { \n        if (isSomeVnode(oldStartVnode, newStartVnode)) {  // 从头开始比较\n            // 如果节点tag一致 则比对属性\n            patch(oldStartVnode, newStartVnode)\n            oldStartVnode = oldChild[++oldStartIndex]\n            newStartVnode = newChild[++newStartIndex]\n        } else if (isSomeVnode(oldEndVnode, newEndVnode)) {  // 从后开始比较\n            patch(oldEndVnode, newEndVnode)\n            oldEndVnode = oldChild[--oldENdIndex]\n            newEndVnode = newChild[++newENdIndex]\n        } else if (isSomeVnode(oldStartVnode, newEndVnode)) { \n            // 头移尾\n            patch(oldStartVnode, newEndVnode)\n            parent.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling)\n            oldStartVnode = oldChild(++oldStartIndex)\n            newEndVnode = newChild[--newENdIndex]\n        }\n    }\n    if (newStartIndex <= newENdIndex) { \n        for (let i = newStartIndex; i <= newENdIndex; i++) { \n            // parent.appendChild(createElm(newChild[i]))\n            let flag = newChild[newENdIndex + 1] == null ? null : newChild[newENdIndex+1].el\n            // if (!flag) {\n            //     parent.insertBefore(newChild[i], null) // null 等价 appendChild\n            // } else { \n            //     parent.insertBefore(newChild[i], flag)\n            // }\n            parent.insertBefore(newChild[i], flag)\n        }\n    }\n}\nfunction createComponent(vnode) {\n    console.log(vnode)\n    let i = vnode.data\n    if ((i = i.hook) && (i = i.init)) { \n        i(vnode)\n    }\n    // 存在 组件\n    if (vnode.componentInstance) { \n        return true\n    }\n}\n//  虚拟节点跟真实节点关联起来\nexport function createElm(vnode) { \n    let {tag, children, key, data, text } = vnode\n    if (typeof tag === 'string') { \n        // tag 有可能是组件 普通元素\n        // 实例化组件\n        if (createComponent(vnode)) { \n            //   返回真实DOM\n            return vnode.componentInstance.$el\n        }\n        vnode.el = document.createElement(tag)\n        updateProps(vnode)\n        children && children.forEach(child => { \n            // 递归创建儿子节点 将儿子节点插入到父节点上\n            return vnode.el.appendChild(createElm(child))\n        })\n    } else { \n        vnode.el =  document.createTextNode(text)\n    }\n    return vnode.el\n}\nfunction updateProps(vnode, oldProps = {}) {\n    let newProps = vnode.data || {}\n    let el = vnode.el\n    let newStyle = newProps.style || {}\n    let oldStyle = oldProps.style || {}\n    // 样式对比\n    for (let key in oldStyle) { \n        if (!newStyle[key]) { \n            el.style[key]='' // 删除多余样式\n        }\n    }\n    // diff 老的属性中新的没有 则删除\n    for (let key in oldProps) { \n        if (!newProps[key]) { \n            el.removeAttribute(key)\n        }\n    }\n\n    for (let key in newProps) { \n        if (key == 'style') {\n            for (let styleName in newProps.style) {\n                el.style[styleName] = newProps.style[styleName]\n            }\n        } else if (key == 'class') {\n            el.className = newProps.class\n        } else { \n            el.setAttribute(key, newProps[key])\n        }\n    }\n }","import Watcher from './observe/watcher.js';\nimport {patch } from './vdom/patch.js';\nexport function mountComponent(vm, el) {\n    const options = vm.$options\n    vm.$el = el\n    callHook(vm, 'beforeMount')\n    let updateComponent = () => { \n        // 通过虚拟dom 创建真实dom\n        vm._update(vm._render())\n    }\n    new Watcher(vm, updateComponent, () => { }, true)\n    callHook(vm, 'mounted')\n}\nexport function lifecycleMixin(Vue) { \n    Vue.prototype._update = function (vNode) { \n        console.log(vNode)\n        const vm = this\n        vm.$el = patch(vm.$el, vNode) //使用虚拟节点渲染真实dom\n    }\n}\nexport function callHook(vm, hook) { \n    const handlers = vm.$options[hook]\n    if (handlers) { \n        for (let i = 0; i < handlers.length; i++) { \n            handlers[i].call(vm)\n        }\n    }\n}","import { initState } from './state';\nimport { compileToFunction } from './compiler/index.js';\nimport { mountComponent, callHook } from './lifecycle.js';\nimport { mergeOptions } from './utils/index';\nimport {nextTick} from './utils/next-tick.js';\n// 在原型上挂载方法\nexport function initMixin(Vue) { \n    Vue.prototype._init = function (options) {\n        const vm = this\n        // 用户传入的 与全局合并 options 千万别写错了\n        console.log(vm.constructor)\n        vm.$options = mergeOptions(vm.constructor.options, options)\n        callHook(vm, 'beforeCreate')\n        // 初始化状态\n        initState(vm)\n        callHook(vm,'created')\n        // render渲染\n        if (vm.$options.el) { \n            vm.$mount(vm.$options.el)\n        }\n    }\n    Vue.prototype.$mount = function (el) { \n        const vm = this;\n        const options = vm.$options\n        el = document.querySelector(el)\n        // 先查找render template 最后用el\n        if (!options.render) { \n            let template = options.template\n            if (!template && el) { \n                template = el.outerHTML\n            }\n            options.render = compileToFunction(template)\n        }\n        mountComponent(vm, el)\n    }\n    Vue.prototype.$nextTick = nextTick\n}\n","import { isObject, isReservedTag } from \"../utils/index.js\";\n\n// render.js 中调用\nexport function createElement(vm, tag, data = {}, ...children) { \n    let key = data.key;\n    if (key) { \n        delete data.key\n    }\n    if (isReservedTag(tag)) {\n        return vnode(tag, data, key, children, undefined)\n    } else { \n        // 组件\n        let Ctor = vm.$options.components[tag];\n        return createComponent(vm, tag, data, key, children, Ctor)\n    }\n}\nfunction createComponent(vm, tag, data, key, children, Ctor) { \n    let constructorFn = Ctor;\n    if (isObject(Ctor)) { \n        // 调用extend.js中的extend\n        constructorFn = vm.$options._base.extend(Ctor)\n    }\n    data.hook = {\n        init(vnode) {\n            let child = vnode.componentInstance =  new constructorFn({_isComponent: true})\n            child.$mount()\n        }\n    }\n    let cid  = constructorFn && constructorFn.cid\n    return vnode(`vue-component-${cid}-${tag}`, data, key, undefined, {\n        constructorFn, children\n    })\n}\n// 文本节点\nexport function createTextNode(vm,text) { \n    return vnode(undefined,undefined, undefined,undefined, text)\n}\nfunction vnode(tag, data, key, children, text, componentOptions) {\n    return {tag, data, key, children, text,componentOptions}\n }","import { createElement, createTextNode} from './vdom/create-element.js';\nexport function renderMixin(Vue) { \n    Vue.prototype._c = function () {\n        return createElement(this, ...arguments);\n    }\n    Vue.prototype._v = function (text) { \n        return createTextNode(this, text);\n    }\n    Vue.prototype._s = function (val) { \n        return val == null ? '' : (typeof val === 'object'? JSON.stringify(val):val)\n    }\n    Vue.prototype._render = function () { \n        const vm = this\n        const { render } = vm.$options\n        return render.call(vm)\n    }\n}","import { mergeOptions } from '../utils/index.js';\nexport default function initMixin(Vue) { \n    Vue.mixin = function (mixin) {\n        // this => Vue\n        // 如何实现两个对象的合并\n        console.log(this)\n        this.options =  mergeOptions(this.options, mixin)\n     }\n}","export const ASSETS_TYPE = [\n    \"component\",\n    \"filter\",\n    'directive'\n]\n","import {ASSETS_TYPE } from './const.js';\nexport default function initAssetRegisters(Vue) { \n    ASSETS_TYPE.forEach(type => { \n        Vue[type] = function (id, definition) { \n            console.log(id)\n            console.log(definition)\n            console.log(type)\n            if (type == 'component') {\n                definition = this.options._base.extend(definition)\n             }\n            if (type == 'filter') { }\n            if (type == 'directive') { }\n            this.options[type+'s'][id] = definition\n        }\n    })\n}","import { mergeOptions } from \"../utils/index.js\"\nlet cid = 0\nexport default function initExtend(Vue) {\n    Vue.extend = function(extendOptions) { \n        console.log(extendOptions)\n        const Sub = function VueComponent(options) { \n            this._init(options)\n        }\n        Sub.prototype = Object.create(this.prototype)\n        Sub.prototype.constructor = Sub\n        Sub.cid = cid++\n        Sub.options = mergeOptions(this.options, extendOptions)\n        console.dir(Sub)\n        return Sub\n    }\n }","import initMixin from './mixin.js';\nimport initAssetRegisters from './assets.js';\nimport { ASSETS_TYPE } from './const.js'; //VUE中常见关键字（component filter directive......）\nimport initExtend from './extend.js'; // 继承\nexport function initGlobalAPI(Vue) { \n    Vue.options = {}\n    initMixin(Vue)\n    // 初始化 组件 指令 过滤器\n    ASSETS_TYPE.forEach(type => { \n        Vue.options[type + 's'] = {}\n    })\n    Vue.options._base = Vue\n    initExtend(Vue) //注册extend\n    initAssetRegisters(Vue)\n}","import { initMixin } from './init'\nimport { renderMixin } from './render.js';\nimport { lifecycleMixin } from './lifecycle';\nimport { initGlobalAPI} from './initGlobalAPI/index.js';\nfunction Vue(options) {\n   this._init(options) // 在原型上\n}\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\ninitGlobalAPI(Vue)\nexport default Vue"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","writable","configurable","proxy","vm","source","get","set","newVal","LIFECYCLE_HOOKS","stratas","mergeHook","parentVal","childVal","console","log","concat","forEach","hook","mergeAssets","res","create","components","mergeOptions","parent","child","options","mergeField","hasOwnProperty","isReservedTag","tagName","str","obj","split","tag","trim","oldArrayMethods","Array","prototype","arrayMethods","methods","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Dep","subs","watcher","push","target","addDep","update","stack","pushTarget","popTarget","pop","length","Observe","isArray","__proto__","walk","i","observe","keys","defineReactive","childOb","depend","dependArray","current","isObj","initState","opts","$options","props","initData","computed","watch","_data","call","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","attrs","type","children","start","element","chars","text","replace","end","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","generate","el","genChildren","code","genProps","item","JSON","stringify","map","c","gen","join","node","tokens","lastIndex","index","exec","compileToFunction","template","renderFn","Function","callbacks","waiting","nextTick","cb","setTimeout","fn","queue","has","flushSchedularQueue","run","queueWatcher","Watcher","exprOrFn","getter","depsId","Set","deps","add","addSub","patch","oldVnode","vnode","createElm","isRealElement","nodeType","oldEle","parentEle","parentNode","insertBefore","nextSibling","removeChild","replaceChild","textContent","updateProps","oldChild","newChild","updateChildren","appendChild","innerHTML","isSomeVnode","newVnode","oldStartIndex","oldStartVnode","oldENdIndex","oldEndVnode","newStartIndex","newStartVnode","newENdIndex","newEndVnode","flag","createComponent","init","componentInstance","$el","document","createElement","createTextNode","oldProps","newProps","newStyle","style","oldStyle","removeAttribute","styleName","className","setAttribute","mountComponent","callHook","updateComponent","_update","_render","lifecycleMixin","Vue","vNode","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","$nextTick","undefined","Ctor","constructorFn","_base","extend","_isComponent","cid","componentOptions","renderMixin","_c","arguments","_v","_s","val","mixin","ASSETS_TYPE","initAssetRegisters","definition","initExtend","extendOptions","Sub","VueComponent","dir","initGlobalAPI"],"mappings":"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"}